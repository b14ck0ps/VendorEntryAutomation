@using VE.DataTransferObject.Enums;

<form method="post" action="@Url.Action("SubmitAction", "Home")" class="mt-1">
    @Html.AntiForgeryToken()
    <section class="card card-header mb-2 mt-3">
        <section>
            <div>
                <div class="row">
                    <p class="fw-bold">Requestor Information</p>
                </div>

                <div class="row mb-1" style="font-size: 12px;">
                    <div class="col-md-4">Employee Name: <b>@ViewBag.EmployeeData.EmployeeName </b></div>
                    <div class="col-md-4">Employee ID:<b> @ViewBag.EmployeeData.EmployeeId</b></div>
                    <div class="col-md-4">Position:<b> @ViewBag.EmployeeData.Designation</b></div>
                </div>

                <div class="row mb-1" style="font-size: 12px;">
                    <div class="col-md-4">Department:<b> @ViewBag.EmployeeData.DeptName</b></div>
                    <div class="col-md-4">Location: <b>@ViewBag.EmployeeData.BusAreaName</b></div>
                    <div class="col-md-4">Mobile: <b>@ViewBag.EmployeeData.Mobile</b></div>
                </div>

                <div class="row mb-1" style="font-size: 12px;">
                    <div class="col-md-4">Email: <b>@ViewBag.EmployeeData.Email</b></div>
                    <div class="col-md-4">Grade: <b>@ViewBag.EmployeeData.JobGrade</b></div>
                </div>
            </div>
        </section>
        <hr />
        <section>
            <p class="fw-bold">Vendor Automation Code: <b>@ViewBag.AppProspectiveVendor.Code</b></p>
            <div class="row mb-1" style="font-size: 12px;">
                <div class="col-md-4">
                    <label for="VendorName" class="form-label">Vendor Name:</label>
                    <span id="VendorName" class="form-text"><b>@ViewBag.AppProspectiveVendor.VendorName</b></span>
                </div>
                <div class="col-md-4">
                    <label for="Status" class="form-label">Status:</label>
                    <span id="Status" class="form-text"><b>@Enum.GetName(typeof(Status), @ViewBag.AppProspectiveVendor.Status)</b> </span>
                </div>
                <div class="col-md-4">
                    <label for="VendorEmail" class="form-label">Vendor Email:</label>
                    <span id="VendorEmail" class="form-text"><b>@ViewBag.AppProspectiveVendor.VendorEmail</b></span>
                </div>
            </div>

            <div class="row mb-1" style="font-size: 12px;">
                <div class="col-md-4">
                    <label for="ServiceDescription" class="form-label">Service Description:</label>
                    <span id="ServiceDescription" class="form-text"><b>@ViewBag.AppProspectiveVendor.ServiceDescription</b></span>
                </div>
                <div class="col-md-4">
                    <label for="RequirementGeneral" class="form-label">Supplier General Request:</label>
                    <span id="RequirementGeneral" class="form-text"><b>@ViewBag.AppProspectiveVendor.RequirementGeneral</b></span>
                </div>
                <div class="col-md-4">
                    <label for="RequirementOther" class="form-label">Supplier Other Request:</label>
                    <span id="RequirementOther" class="form-text"><b>@ViewBag.AppProspectiveVendor.RequirementOther</b></span>
                </div>
            </div>

            <div class="row mb-1" style="font-size: 12px;">
                <div class="col-md-4">
                    <label for="TypeOfSupplierId" class="form-label">Supplier Type:</label>
                    <span id="TypeOfSupplierId" class="form-text"><b>@ViewBag.AppProspectiveVendor.TypeOfSupplierId</b></span>
                </div>
                <div class="col-md-4">
                    <label for="ExisitngSupplierCount" class="form-label">Existing Supplier Count:</label>
                    <span id="ExisitngSupplierCount" class="form-text"><b>@ViewBag.AppProspectiveVendor.ExisitngSupplierCount</b></span>
                </div>
                <div class="col-md-4">
                    <label for="ExisitngSupplierProblem" class="form-label">Existing Supplier Problem:</label>
                    <span id="ExisitngSupplierProblem" class="form-text"><b>@ViewBag.AppProspectiveVendor.ExisitngSupplierProblem</b></span>
                </div>
            </div>

            <div class="row mb-1" style="font-size: 12px;">
                <div class="col-md-4">
                    <label for="NewSupplierAdditionReason" class="form-label">Supplier Add Reason:</label>
                    <span id="NewSupplierAdditionReason" class="form-text"><b>@ViewBag.AppProspectiveVendor.NewSupplierAdditionReason</b></span>
                </div>
            </div>
        </section>
    </section>
    <section class="card card-body mb-3" style="font-size: 12px;">
        <div class="col-12">
            <label class="form-label fw-bold">Materials Lists:</label>
            <table class="table table-responsive" style="font-size: 13px">
                <thead>
                    <tr style="border:1.5px;">
                        <td>#</td>
                        <td>Material Code</td>
                        <td>Material Name</td>
                    </tr>
                </thead>
                <tbody>
                    @{
                        var appProspectiveVendorMaterials = ViewBag.AppProspectiveVendorMaterials;

                        for (var i = 0; i < appProspectiveVendorMaterials.Count; i++)
                        {
                            var item = appProspectiveVendorMaterials[i];
                            <tr>
                                <td>@(i + 1)</td>
                                <td>@item.MaterialCode</td>
                                <td>@item.MaterialName</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </section>

    <section class="card card-group justify-content-between p-3 mb-3 align-items-center" style="font-size: 12px;">
        <div class="d-flex align-items-center gap-3">
            <label for="NewSupplierAdditionReason" class="form-label">Pending With:</label>
            <span id="NewSupplierAdditionReason" class="form-text">@ViewBag.AppProspectiveVendor.PendingWithUserId</span>
        </div>
    </section>

    @if (ViewBag.ActionEnabled)
    {
        <section class="card card-group justify-content-between p-3 mb-3 align-items-center">
            <div>
                <label for="Comment" class="form-label">Comment:</label>
                <textarea id="Comment" name="Comment" class="form-control no-padding" style="height: 100px; width: 500px;" required></textarea>
            </div>
            <div>
                <div class="d-flex justify-content-between gap-5">
                    <input type="hidden" name="AppProspectiveVendorCode" value="@ViewBag.AppProspectiveVendor.Code" />
                    <input type="hidden" name="CurrentStatus" value="@ViewBag.AppProspectiveVendor.Status" />
                    <button type="submit" name="submitBtn" value="@ApproverAction.Approved" class="btn btn-info">Approve</button>
                    <button type="submit" name="submitBtn" value="@ApproverAction.Rejected" class="btn btn-danger">Reject</button>
                </div>
            </div>
        </section>
    }
    @if (ViewBag.PendingWithVendor != null)
    {
        <section class="card card-text mb-3 p-2">
            <p class="text-info fw-bold text-center">Waiting for Vendor's Submission</p>
        </section>
    }
</form>

<section class="card card-text p-3" style="font-size: 12px;">
    <div class="row">
        <p class="fw-bold">History Log</p>
    </div>
    <table class="table table-border">
        <thead>
            <tr>
                <th>Status</th>
                <th>Action</th>
                <th>Action By</th>
                <th>Comment</th>
                <th>Creation Time</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in ViewBag.AppVendorEnlistmentLogs)
            {
                <tr>
                    <td>@Enum.GetName(typeof(Status), item.Status)</td>
                    <td>@item.Action</td>
                    <td>@item.ActionById</td>
                    <td>@item.Comment</td>
                    <td>@item.CreationTime</td>
                </tr>
            }
        </tbody>
    </table>
</section>